{"version":3,"sources":["webpack:///./js/maps.js"],"names":["geocoder","map","refs","googleMapsScript","document","querySelector","mapsBtnList","searchInput","loadGoogleMaps","Promise","resolve","reject","onload","onerror","google","maps","Geocoder","latlng","LatLng","mapOptions","zoom","center","Map","getElementById","addEventListenersOnButtons","addEventListener","layer","opacity","radar","target","overlayMapTypes","pop","dataset","ImageMapType","getTileUrl","coord","x","y","join","tileSize","Size","push","initialize","e","preventDefault","address","value","geocode","results","status","setCenter","geometry","location","Marker","position","alert"],"mappings":"yeAAA,IAKIA,EACAC,EANEC,EAAO,CACXC,iBAAkBC,SAASC,cAAc,eACzCC,YAAaF,SAASC,cAAc,iBACpCE,YAAaH,SAASC,cAAc,mBAKhCG,EAAiB,WACrB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BT,EAAKC,iBAAiBS,OAAS,kBAAMF,KACrCR,EAAKC,iBAAiBU,QAAU,kBAAMF,S,iDAI1C,qHACQH,IADR,OAGER,EAAW,IAAIc,OAAOC,KAAKC,SACrBC,EAAS,IAAIH,OAAOC,KAAKG,OAAO,OAAQ,QACxCC,EAAa,CACjBC,KAAM,EACNC,OAAQJ,GAGVhB,EAAM,IAAIa,OAAOC,KAAKO,IAAIlB,SAASmB,eAAe,OAAQJ,GAE1DK,IAZF,4C,sBAeA,SAASA,IACPtB,EAAKI,YAAYmB,iBAAiB,SAAS,YAAgB,IAW3CC,EAAOC,EACjBC,EAZwCC,EAAa,EAAbA,QAC5C5B,EAAI6B,gBAAgBC,MAES,WAAzBF,EAAOG,QAAQN,SAQLA,EAJLG,EAAOG,QAAQN,MAIHC,EAJU,KAK3BC,EAAQ,IAAId,OAAOC,KAAKkB,aAAa,CACzCC,WAAY,SAAUC,EAAOf,GAC3B,MAAO,CAAC,4FACsFM,EADvF,IACgGC,EADhG,IAELP,EACA,IACAe,EAAMC,EACN,IACAD,EAAME,EACN,gBACAC,KAAK,KAETC,SAAU,IAAIzB,OAAOC,KAAKyB,KAAK,IAAK,OAGtCvC,EAAI6B,gBAAgBW,KAAKb,Q,mCAqB3Bc,GAEAxC,EAAKK,YAAYkB,iBAAiB,UApBlC,SAAqBkB,GACnBA,EAAEC,iBACF,IAAMC,EAAU3C,EAAKK,YAAYuC,MACjC7C,EAAImB,KAAO,EAEXpB,EAAS+C,QAAQ,CAAEF,YAAW,SAAUG,EAASC,GAC/C,GAAe,OAAXA,EAAiB,CACnBhD,EAAIiD,UAAUF,EAAQ,GAAGG,SAASC,UACnB,IAAItC,OAAOC,KAAKsC,OAAO,CACpCpD,MACAqD,SAAUN,EAAQ,GAAGG,SAASC,gBAGhCG,MAAM,wDAA0DN,W","file":"main.2219cc428275dc2af667.js","sourcesContent":["const refs = {\r\n  googleMapsScript: document.querySelector('#googleMaps'),\r\n  mapsBtnList: document.querySelector('.maps-buttons'),\r\n  searchInput: document.querySelector('.search__input'),\r\n};\r\nlet geocoder;\r\nlet map;\r\n\r\nconst loadGoogleMaps = () => {\r\n  return new Promise((resolve, reject) => {\r\n    refs.googleMapsScript.onload = () => resolve();\r\n    refs.googleMapsScript.onerror = () => reject();\r\n  });\r\n};\r\n\r\nasync function initialize() {\r\n  await loadGoogleMaps();\r\n\r\n  geocoder = new google.maps.Geocoder();\r\n  const latlng = new google.maps.LatLng(47.563, 24.113);\r\n  const mapOptions = {\r\n    zoom: 2,\r\n    center: latlng,\r\n  };\r\n\r\n  map = new google.maps.Map(document.getElementById('map'), mapOptions);\r\n\r\n  addEventListenersOnButtons();\r\n}\r\n\r\nfunction addEventListenersOnButtons() {\r\n  refs.mapsBtnList.addEventListener('click', ({ target }) => {\r\n    map.overlayMapTypes.pop();\r\n\r\n    if (target.dataset.layer === 'remove') {\r\n      return;\r\n    }\r\n\r\n    addRadar(target.dataset.layer, '50');\r\n  });\r\n}\r\n\r\nfunction addRadar(layer, opacity) {\r\n  const radar = new google.maps.ImageMapType({\r\n    getTileUrl: function (coord, zoom) {\r\n      return [\r\n        `https://maps.aerisapi.com/GrAzy4MYDmdT7vTgRDBkx_NRWKJNNZ7xqGXjwqmiCYsVhji3eOH9Jg31vpUS6p/${layer}:${opacity}/`,\r\n        zoom,\r\n        '/',\r\n        coord.x,\r\n        '/',\r\n        coord.y,\r\n        '/current.png',\r\n      ].join('');\r\n    },\r\n    tileSize: new google.maps.Size(256, 256),\r\n  });\r\n\r\n  map.overlayMapTypes.push(radar);\r\n}\r\n\r\nfunction codeAddress(e) {\r\n  e.preventDefault();\r\n  const address = refs.searchInput.value;\r\n  map.zoom = 7;\r\n\r\n  geocoder.geocode({ address }, function (results, status) {\r\n    if (status === 'OK') {\r\n      map.setCenter(results[0].geometry.location);\r\n      const marker = new google.maps.Marker({\r\n        map,\r\n        position: results[0].geometry.location,\r\n      });\r\n    } else {\r\n      alert('Geocode was not successful for the following reason: ' + status);\r\n    }\r\n  });\r\n}\r\n\r\ninitialize();\r\n\r\nrefs.searchInput.addEventListener('change', codeAddress);\r\n"],"sourceRoot":""}